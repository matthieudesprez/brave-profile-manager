# Brave Profile Manager

Set custom theme colors in Brave Browser profiles, bypassing the restricted color picker introduced in recent Chromium versions.

## The Problem

Recent versions of Chromium (and thus Brave) replaced the flexible color picker with a limited set of predefined colors. This tool restores the ability to use **any hex color** for your browser theme.

See: [brave/brave-browser#39629](https://github.com/brave/brave-browser/issues/39629)

## Installation

```bash
# Clone the repository
git clone https://github.com/matthieudesprez/brave-profile-manager.git
cd brave-profile-manager

# Make it executable (optional)
chmod +x brave_profile_color.py
```

**Requirements:** Python 3.10+ (no external dependencies)

## Usage

**Important:** Close Brave Browser before running the script.

### List all profiles

```bash
python3 brave_profile_color.py --list
```

Output shows profile folders, names, current colors (with swatches), and status:
- `✓ custom` - Using unrestricted custom color
- `⚠ restricted` - Using the limited color picker
- `extension` - Using a theme extension

### Apply a color to all profiles

```bash
python3 brave_profile_color.py "#FF5500"
```

### Apply to specific profiles by folder

```bash
python3 brave_profile_color.py "#3366FF" -p Default "Profile 1"
```

### Apply to profiles by name

```bash
python3 brave_profile_color.py "#AA0000" -n "Work" "Personal"
```

Names are case-insensitive and support partial matching.

### Preview changes (dry run)

```bash
python3 brave_profile_color.py "#00FF00" --dry-run
```

### Custom data directory

For Brave Beta, Nightly, or custom installations:

```bash
python3 brave_profile_color.py --list --data-dir ~/Library/Application\ Support/BraveSoftware/Brave-Browser-Beta
```

### All options

```
usage: brave_profile_color.py [-h] [-p FOLDER [FOLDER ...]] [-n NAME [NAME ...]]
                               [-l] [--dry-run] [--no-backup] [-f] [-v]
                               [--data-dir PATH] [color]

positional arguments:
  color                 Hex color to apply (e.g., #FF5500)

options:
  -h, --help            show this help message and exit
  -p, --profiles FOLDER [FOLDER ...]
                        Profile folders to update (e.g., 'Default', 'Profile 1')
  -n, --name NAME [NAME ...]
                        Profile names to update (case-insensitive, partial match)
  -l, --list            List all profiles and their current colors
  --dry-run             Show what would be changed without making changes
  --no-backup           Don't create backups before modifying
  -f, --force           Apply changes even if Brave is running (not recommended)
  -v, --version         show program's version number and exit
  --data-dir PATH       Custom Brave user data directory (default: auto-detect)
```

## How It Works

Brave stores theme colors in the `Preferences` JSON file for each profile. Two settings control the theme:

1. `autogenerated.theme.color` - The color value as a signed 32-bit integer (ARGB format)
2. `extensions.theme.id` - Must be set to `"autogenerated_theme_id"` to use custom colors

The restricted picker uses `"user_color_theme_id"` which limits available colors. This tool sets both values to enable any hex color.

### Color Conversion

Hex colors are converted to signed 32-bit integers:

```
#FF5500 → 0xFFFF5500 → 4294924544 → -42752 (signed)
```

## Platform Support

| Platform | Status | Data Directory |
|----------|--------|----------------|
| macOS    | ✅ Tested | `~/Library/Application Support/BraveSoftware/Brave-Browser` |
| Linux    | ✅ Should work | `~/.config/BraveSoftware/Brave-Browser` |
| Windows  | ✅ Should work | `%LOCALAPPDATA%\BraveSoftware\Brave-Browser\User Data` |

## Backups

By default, the tool creates backups of `Preferences` files before modification. Backups are stored in:

```
<Brave User Data>/.color_backups/
```

Use `--no-backup` to disable this behavior.

## License

MIT License - feel free to use, modify, and distribute.

## Contributing

Contributions welcome! Please open an issue or PR on GitHub.
